---
title: '[WEB] 3. JSP'
date: 2021-09-03 13:08:79
category: 'WEB'
thumbnail: { thumbnailSrc }
draft: false
---



# 1. JSPë€?

**Java Server Page**

HTML ì½”ë“œì— JAVA ì½”ë“œë¥¼ ë„£ì–´ ë™ì  ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì„œë²„ ì‚¬ì´ë“œ ì–¸ì–´(Web Containerì—ì„œ ì‹¤í–‰ë˜ëŠ” ì–¸ì–´)

(ì°¸ê³ : html / css / jsëŠ” client side ì–¸ì–´ - ì„œë²„ ì—†ì´ë„ ë¸Œë¼ìš°ì €ë§Œ ìˆìœ¼ë©´ ì‹¤í–‰ ê°€ëŠ¥)



âš¡ **íŠ¹ì§•**

- íŒŒì¼ í™•ì¥ì : *.jsp
- jsp íŒŒì¼ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì‹œì— **ë‚´ë¶€ì ìœ¼ë¡œ ì›¹ ì»¨í…Œì´ë„ˆê°€ servletìœ¼ë¡œ ë³€í™˜í•œë‹¤** .
  - ì´í›„ ì»´íŒŒì¼ - byte codeë¥¼ ë©”ëª¨ë¦¬ì— ë¡œë”© - servlet ê°ì²´ ìƒì„±, init() í˜¸ì¶œ, service() í˜¸ì¶œ ... ë“±ë“± servlet ìƒëª…ì£¼ê¸° ë˜‘ê°™ì´ ì§„í–‰ (ì´ì „ í¬ìŠ¤íŒ… ì°¸ê³  - [Servlet](https://hyemin-jang.github.io/WEB/2.Servlet-%ED%99%94%EB%A9%B4%EC%9D%B4%EB%8F%99%EA%B3%BC%20%EC%83%81%ED%83%9C%EC%9C%A0%EC%A7%80/) )
  - ì¦‰ jsp íŒŒì¼ì€ servlet íŒŒì¼ê³¼ ê°™ì€ ì›¹ ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ + HTML íŒŒì¼ê³¼ ê°™ì€ UIì  ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ **presentationìš© ì›¹ ê°œë°œ ìŠ¤í™**
- Servletê³¼ ë‹¬ë¦¬ jspëŠ” **ë‚´ì¥ ê°ì²´**ê°€ ìˆë‹¤ : ë³€ìˆ˜íƒ€ì… ë³€ìˆ˜ëª… ì„ ì–¸í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **ë³€ìˆ˜ëª…ë§Œ í˜¸ì¶œí•´ì„œ ì‚¬ìš© ê°€ëŠ¥**
  - HttpServletRequestë¥¼ ì˜ë¯¸í•˜ëŠ” `request`
  - HttpServletResponseë¥¼ ì˜ë¯¸í•˜ëŠ” `response`
  - HttpSessionì„ ì˜ë¯¸í•˜ëŠ” `session`
  - PrintWriterë¥¼ ì˜ë¯¸í•˜ëŠ” `out` .. ë“±ë“±

- jsp íŒŒì¼ì—ì„œëŠ” html / css / javascript / ìë°” ë°ì´í„° í•¸ë“¤ë§í•˜ëŠ” ì½”ë“œ(java code, jsp tag)ë¥¼ í˜¼ìš©í•´ì„œ ê°œë°œí•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ!! **jsp ë‚´ì—ì„œëŠ” ê°€ê¸‰ì  ìˆœìˆ˜ java codeëŠ” ìµœì†Œí™”í•˜ëŠ” ê²ƒì„ ê¶Œì¥!!**

  

<img src="./img/jsp1.PNG">



## 1) JSP tag ì¢…ë¥˜

### (1) JSP scripting tag

ê°€ì¥ ê¸°ì´ˆì ì¸ JSP íƒœê·¸. ì´ 5ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤.

- â­**ì£¼ì„** 

  ````
  <%-- ë‚´ìš© --%>
  ````

- â­**ì§€ì‹œì(directive)** : ì¸ì½”ë”© ì„¤ì •, ì™¸ë¶€ ìë°” ì†ŒìŠ¤ import 

  ````
  <%@ ë‚´ìš© %>
  ````

- **í‘œí˜„ì‹(expression)** : ë¸Œë¼ìš°ì €ì— ì¶œë ¥ 

  ````
  <%= ë‚´ìš© %>
  ````

- **ì„ ì–¸ì(declaration)** :  ë©¤ë²„ë³€ìˆ˜ ë° ë©¤ë²„ë©”ì†Œë“œ êµ¬í˜„ 

  ```
  <%! ë‚´ìš© %>
  ```

  

- **ìŠ¤í¬ë¦½íŠ¸ë¦¿(scriptlet)** :  ì„œë¹„ìŠ¤ êµ¬í˜„ (ì•ˆì— ìë°” ì½”ë“œ ê·¸ëŒ€ë¡œ ì‘ì„±) 

  ```
  <% ë‚´ìš©(ìë°”ì½”ë“œ) %>
  ```

  

    

âœ… ì´ì „ Servlet í¬ìŠ¤íŒ…ì—ì„œ ì¼ë˜ ì˜ˆì œì˜ ë·° ë¶€ë¶„ì„ scripting tagë¥¼ ì‚¬ìš©í•´ì„œ jsp íŒŒì¼ë¡œ ë°”ê¿”ë³´ì

<login.html>

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>login</title>
</head>
<body>
	<form action="check" method="post">
		<input type="text" name="id" value="abc"> <br>
		<input type="password" name="pw" value="123"> <br>
		<input type="submit" value="ë¡œê·¸ì¸">
	</form>

</body>
</html>
```



<Validation.java> - ì„œë¸”ë¦¿ 

```java
package controller;


import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

@WebServlet("/check")
public class Validation extends HttpServlet {

	protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		String id = request.getParameter("id");
		String pw = request.getParameter("pw");
		
		if(id.equals("abc") && pw.equals("123")) {  
			Cookie msg = new Cookie("name", "ì¥ë³´ë¦¬");
			msg.setMaxAge(60*60*24*365);  
			response.addCookie(msg);
			
			response.sendRedirect("success.jsp");  // jspíŒŒì¼ë¡œ ì´ë™
		
		} else {
			HttpSession session = request.getSession();
			session.setAttribute("failMsg", "ì¸ì¦ ì‹¤íŒ¨");
			
			// viewë¼ëŠ” ë””ë ‰í† ë¦¬ í•˜ë‹¨ì— ìˆëŠ” fail.jsp íŒŒì¼ë¡œ ì´ë™
            response.sendRedirect("view/fail.jsp");  
		}
	}

}
```



<success.jsp>

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Success</title>
</head>
<body>

<%
	Cookie [] all = request.getCookies();
	for(Cookie c : all) {
		if(c.getName().equals("name")) {
			out.println(c.getValue());
		}
	}	
	out.println("ë‹˜ ë°˜ê°‘ìŠµë‹ˆë‹¤");
%>

</body>
</html>
```



<fail.jsp>

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fail</title>
</head>
<body>

<!-- requestì— setAttribute í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ null ì¶œë ¥ -->
<%= request.getAttribute("failMsg") %><br> 
    
<!-- sessionì— ì €ì¥í•œ ë°ì´í„°ì¸ "ì¸ì¦ ì‹¤íŒ¨" ì¶œë ¥ -->
<%= session.getAttribute("failMsg") %><br>

<%
	session.invalidate();
	session = null;
%>
</body>
</html>
```





### (2) JSP Action tag

ë¬¸ë²•: `<jsp:íƒœê·¸ì¢…ë¥˜ ë‚´ìš©> `

ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ ê°€ì¥ ëŒ€í‘œì ìœ¼ë¡œ

- forward ë°©ì‹ìœ¼ë¡œ í™”ë©´ ì´ë™ 

  - ì¶œë ¥ì€ ìµœì¢… jsp í˜ì´ì§€ì˜ ë‚´ìš©ë§Œ ë¨
  - `request.getRepuestDispatcher("ì´ë™í• í˜ì´ì§€").forward(request, response)` ì™€ ë™ì¼

  ```html
  <jsp:forward page="ì´ë™í• í˜ì´ì§€" />
  ```


- include ë°©ì‹ìœ¼ë¡œ í™”ë©´ ì´ë™ 

  - ì´ë™ ì „/í›„
  - 
  -  ëª¨ë“  jspí˜ì´ì§€ì˜ ë‚´ìš© ì¶œë ¥
  - `request.getRepuestDispatcher("ì´ë™í• í˜ì´ì§€").include(request, response)` ì™€ ë™ì¼

  ```html
  <jsp:include page="ì´ë™í• í˜ì´ì§€" />
  ```

  

### (3) â­ EL (Expression Language)

ë¬¸ë²• : `${ë‚´ìš©}` 

- ì¢€ë” ê°„í¸í•˜ê²Œ **ë¸Œë¼ìš°ì €ì— ì¶œë ¥**ì„ ì§€ì›í•˜ê¸° ìœ„í•œ íƒœê·¸
- { } ì•ˆì—ì„œ ìë°” ì½”ë“œë¥¼ ì‹¤í–‰
- ìë°” ì½”ë“œë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆìŒ - scripting, action íƒœê·¸ë³´ë‹¤ ë°œì „ëœ íƒœê·¸

- null ì¸ ê²½ìš° ë¸Œë¼ìš°ì €ì— blankë¡œ í‘œì‹œë¨



âœ… ìœ„ì˜ jsp scripting íƒœê·¸ë¥¼ ê°€ì§€ê³  ë§Œë“¤ì—ˆë˜ ë·° ë¶€ë¶„ì„ ELíƒœê·¸ë¥¼ í™œìš©í•´ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ì–´ë³´ì

<success.jsp>

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Success</title>
</head>
<body>

${cookie.name.value}

</body>
</html>
```



ğŸ’œ ELíƒœê·¸ëŠ” ì¿ í‚¤ ê°ì²´ë¡œë¶€í„° ë°ì´í„° íšë“í•´ì„œ ì¶œë ¥ì‹œì— ë§¤ìš° ìœ ìš©í•˜ë‹¤!!!



<fail.jsp>

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fail</title>
</head>
<body>
    
<!-- balnk ì¶œë ¥ -->
${requestScope.failMsg}<br>  

${sessionScope.failMsg}<br>  

<%
	session.invalidate();
	session = null;
%>
</body>
</html>
```

ì•„ê¹Œ scripting tagë¥¼ ì‚¬ìš©í–ˆì„ë•Œì™€ ë‹¬ë¦¬, ì¶œë ¥ê°’ì´ nullì¸ ê²½ìš° **nullì´ ì¶œë ¥ë˜ëŠ” ëŒ€ì‹ ì— ì•„ë¬´ê²ƒë„ ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤**ëŠ” ì°¨ì´ê°€ ìˆë‹¤.





âœ… ë‹¤ì–‘í•œ íƒ€ì…ì˜ ìë°” ë°ì´í„°ë¥¼ ELíƒœê·¸ë¥¼ ì‚¬ìš©í•´ ë¸Œë¼ìš°ì €ì— ì¶œë ¥í•´ë³´ì

```html
<%@ page import="model.domain.Person, java.util.ArrayList, java.util.HashMap"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"  %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ELtagTest</title>
</head>
<body>
	<%
		String v1 = "string";
		request.setAttribute("v1", v1);
		
		String [] v2 = {"s1", "s2"};
		request.setAttribute("v2", v2);
		
		Person v3 = new Person("ë³´ë¦¬", 10);
		request.setAttribute("v3", v3);
		
		Person [] v4 = {new Person("ë¦¬íƒœ1", 10), new Person("ë¦¬íƒœ2", 20)};
		request.setAttribute("v4", v4);
		
		ArrayList<String> v5 = new ArrayList<>();
		v5.add("al1");
		v5.add("al2");
		request.setAttribute("v5", v5);
		
		ArrayList<Person> v6 = new ArrayList<>();
		v6.add(new Person("í‚¤ìœ„1", 10));
		v6.add(new Person("í‚¤ìœ„2", 20));
		request.setAttribute("v6", v6);
		
		HashMap<String, String> v7 = new HashMap<>();
		v7.put("key1", "value1");
		v7.put("key2", "value2");
		request.setAttribute("v7", v7);
	%>
	
	1. String ì¶œë ¥ : ${requestScope.v1} <br>
    
	2. String ë°°ì—´ ë‚´ì˜ ë°ì´í„° ì¶œë ¥ : ${requestScope.v2[0]} <br>
    
<!-- DTO ê°ì²´ì˜ ë³€ìˆ˜ëª…ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥ - ìë™ìœ¼ë¡œ getë©”ì„œë“œ í˜¸ì¶œ (getë©”ì„œë“œ ì—†ìœ¼ë©´ ì •ìƒì‹¤í–‰ ì•ˆë¨) -->
	3. DTO ì¶œë ¥ : ${requestScope.v3.name} / ${requestScope.v3.age} <br>
    
	4. DTO ë°°ì—´ ë‚´ì˜ ë°ì´í„° ì¶œë ¥ : ${requestScope.v4[1].name} <br>
    
<!-- requestScope í˜¹ì€ sessionScope ìƒëµ ê°€ëŠ¥ / ë¦¬ìŠ¤íŠ¸ì¸ë°ë„ ë°°ì—´ì²˜ëŸ¼ ì¸ë±ìŠ¤ë¡œ í˜¸ì¶œ -->
	5. List ë‚´ì˜ ë°ì´í„° ì¶œë ¥ : ${v5[1]} <br> 
    
	6. DTO List ë‚´ì˜ ë°ì´í„° ì¶œë ¥ : ${v6[1].name} <br>
    
	7. Map ë‚´ì˜ ë°ì´í„° ì¶œë ¥ : ${v7.key1} <br>
	
</body>
</html>
```





### (4) â­ JSTL (JSP Standard Tag Library)

- ìˆœìˆ˜ ìë°” ì½”ë“œë¥¼ jspì—ì„œ ìµœì†Œí™”í•  ìˆ˜ ìˆëŠ” ë°œì „ëœ íƒœê·¸

- ë³„ë„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì œê³µë¨
  - apache ì‚¬ì´íŠ¸ì—ì„œ ë‹¤ìš´ë¡œë“œ / ë˜ëŠ” ê° ì„œë²„ë§ˆë‹¤ ìƒ˜í”Œì´ ìˆìŒ
  - Tomcat ì„œë²„ì˜ ê²½ìš° `tomcat-9.0.52\webapps\examples\WEB-INF\lib` ì•ˆì— jaríŒŒì¼ 2ê°œê°€ ë“¤ì–´ìˆë‹¤
  
- jar íŒŒì¼ì„ ë‹¤ì´ë‚˜ë¯¹ ì›¹ í”„ë¡œì íŠ¸ì—ì„œ `WebContent\WEB-INF\lib`í´ë” ë‚´ì— ë„£ì–´ì•¼ ì‚¬ìš© ê°€ëŠ¥

- ELíƒœê·¸ í˜¼ìš©í•´ì„œ ê°œë°œí•œë‹¤.

- ë¬¸ë²• 
  - jsp íŒŒì¼ í—¤ë”ì— **tablib ì§€ì‹œì** ì¶”ê°€ : 
  
    ````
    <% @taglib uri="http://java.sun.com/jstl/core" prefix="c" %>
    ````
  
  - jsp action íƒœê·¸ë¥¼ `<jsp:íƒœê·¸ì¢…ë¥˜ ë‚´ìš©>`ì™€ ê°™ì´ ì‚¬ìš©í–ˆë˜ ê²ƒì²˜ëŸ¼, jstl íƒœê·¸ëŠ” ì§€ì •í•œ prefixì¸ cë¥¼ ì‚¬ìš©í•´ì„œ ë¡œ `<c:íƒœê·¸ì¢…ë¥˜ ë‚´ìš©>` ê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.
  
    â€‹	 
    
    
  
  

âœ… JSTL coreì˜ íƒœê·¸ë“¤

1. ì¡°ê±´ë¬¸ : `if`

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="model.domain.Person, java.util.HashMap" %>
    
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSTLTest</title>
</head>
<body>

<c:if test="${1==1}">
	ì¡°ê±´ì´ trueë‹ˆê¹Œ ì¶œë ¥ë˜ëŠ” ë¬¸ì¥! <br>
</c:if>
    
<c:if test="${1==2}">
	ì¡°ê±´ì´ falseë‹ˆê¹Œ ì¶œë ¥ ì•ˆë˜ëŠ” ë¬¸ì¥! <br>
</c:if>

</body>
</html>
```



2. ë‹¤ì¤‘ ì¡°ê±´ë¬¸ :  `when` (switchë¬¸ê³¼ ë¹„ìŠ·)

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="model.domain.Person, java.util.HashMap" %>
    
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSTLTest</title>
</head>
<body>

<c:choose>
	<c:when test="${1==1}">
		ì¡°ê±´ì´ trueë‹ˆê¹Œ ì‹¤í–‰ë˜ëŠ” ë¬¸ì¥<br>
	</c:when>
	<c:when test="${1==2}">
		ì¡°ê±´ì´ falseë‹ˆê¹Œ ì‹¤í–‰ ì•ˆë˜ëŠ” ë¬¸ì¥<br>
	</c:when>
	<c:otherwise>
		ëª¨ë“  ì¡°ê±´ì‹ì´ falseì¸ ê²½ìš° ì‹¤í–‰ë˜ëŠ” ë¬¸ì¥
	</c:otherwise>
</c:choose>

</body>
</html>
```



3. ë°˜ë³µë¬¸ : `forEach`

```html
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="model.domain.Person, java.util.HashMap" %>
 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSTLTest</title>
</head>
<body>

1. 
<c:forEach begin="1" end="5" var="data">
	${data} 
</c:forEach>
<br>
    
2.
<c:forEach begin="10" end="20" step="2" var="data" varStatus="pd">
	ìˆœë²ˆ ${pd.count}- ë°ì´í„° ${data} <br>
</c:forEach>
<br>
    
3.
<%
Person [] arr = {new Person("ë³´ë¦¬", 1),
   				new Person("ë¦¬íƒœ", 2),
   				new Person("í‚¤ìœ„", 3)};
request.setAttribute("arr", arr);

HashMap<String, String> map = new HashMap<>();
map.put("key1", "value1");
map.put("key2", "value2");
map.put("key3", "value3");
request.setAttribute("map", map);
%>
    
<c:forEach items="${arr}" var="data">
	ì´ë¦„: ${data.name} / ë‚˜ì´: ${data.age} <br>
</c:forEach>

<c:forEach items="${map}" var="data">
	key: ${data.key} / value: ${data.value} <br>
</c:forEach>


</body>
</html>
```





