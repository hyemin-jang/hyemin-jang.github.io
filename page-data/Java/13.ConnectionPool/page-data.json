{"componentChunkName":"component---src-templates-blog-post-js","path":"/Java/13.ConnectionPool/","result":{"data":{"site":{"siteMetadata":{"title":"Hyem.log","author":"[hyem]","siteUrl":"https://hyemin-jang.github.io","comment":{"disqusShortName":"","utterances":"hyemin-jang/hyemin-jang.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"ce862953-c072-5d6f-b72b-6f9839dad510","excerpt":"Connection Poolì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ  ìë°” í”„ë¡œê·¸ë¨ì—ì„œ DBMSë¡œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ë ¤ë©´ ì‹œê°„ì´ ë§ì´ ê±¸ë¦°ë‹¤. ì‚¬ìš©ìê°€ ì ‘ì†í•  ë•Œë§ˆë‹¤ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•¨ê³¼ ë™ì‹œì— ì»¤ë„¥ì…˜ í’€ì— ì¼ì • ê°œìˆ˜ì˜ DB ì»¤ë„¥ì…˜ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘”ë‹¤. (Pool - ì„œë²„ì— ì´ë¯¸ ë‚´ì¥ëœ ë©”ëª¨ë¦¬) ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê° ìŠ¤ë ˆë“œì—ì„œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šê³ , ì»¤ë„¥ì…˜í’€ì˜ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ í• ë‹¹ë°›ì•„ ì‚¬ìš©í•œ ë’¤ ë°˜ë‚©í•œë‹¤ img ì´ë¯¸ì§€ ì¶œì²˜ https://devbox.tistory.comâ€¦","html":"<h2 id=\"connection-poolì„-ì‚¬ìš©í•˜ëŠ”-ì´ìœ \" style=\"position:relative;\"><a href=\"#connection-pool%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"connection poolì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ  permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connection Poolì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ </h2>\n<ul>\n<li>ìë°” í”„ë¡œê·¸ë¨ì—ì„œ DBMSë¡œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ë ¤ë©´ ì‹œê°„ì´ ë§ì´ ê±¸ë¦°ë‹¤.</li>\n<li>ì‚¬ìš©ìê°€ ì ‘ì†í•  ë•Œë§ˆë‹¤ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ë©´ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</li>\n<li>ê·¸ë˜ì„œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•¨ê³¼ ë™ì‹œì— <strong>ì»¤ë„¥ì…˜ í’€ì— ì¼ì • ê°œìˆ˜ì˜ DB ì»¤ë„¥ì…˜ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘”ë‹¤.</strong> (Pool - ì„œë²„ì— ì´ë¯¸ ë‚´ì¥ëœ ë©”ëª¨ë¦¬)</li>\n<li>ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê° ìŠ¤ë ˆë“œì—ì„œ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ì§€ ì•Šê³ , ì»¤ë„¥ì…˜í’€ì˜ ì»¤ë„¥ì…˜ ê°ì²´ë¥¼ í• ë‹¹ë°›ì•„ ì‚¬ìš©í•œ ë’¤ ë°˜ë‚©í•œë‹¤</li>\n</ul>\n<p><img src=\"https://t1.daumcdn.net/cfile/tistory/2629B3375492CD3E10\" alt=\"img\"></p>\n<p>[ì´ë¯¸ì§€ ì¶œì²˜] <a href=\"https://devbox.tistory.com/entry/JSP-%EC%BB%A4%EB%84%A5%EC%85%98-%ED%92%80-1\">https://devbox.tistory.com/entry/JSP-%EC%BB%A4%EB%84%A5%EC%85%98-%ED%92%80-1</a></p>\n<h2 id=\"connection-pool-ë§Œë“¤ê¸°\" style=\"position:relative;\"><a href=\"#connection-pool-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"connection pool ë§Œë“¤ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connection Pool ë§Œë“¤ê¸°</h2>\n<h3 id=\"1--datasource\" style=\"position:relative;\"><a href=\"#1--datasource\" aria-label=\"1  datasource permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1)  DataSource</h3>\n<ul>\n<li>ìë°” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¤ë„¥ì…˜í’€ ê°ì²´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìŠ¤í™ì„ ì •ì˜í•´ë†“ì€ ì¸í„°í˜ì´ìŠ¤ =  <code class=\"language-text\">javax.sql.DataSource</code></li>\n<li><strong>DataSource ê°ì²´ì— DBì—°ê²°ì— í•„ìš”í•œ URL, ID, Password, DriverClassë¥¼ ë¯¸ë¦¬ ì •ì˜í•´ë†“ê³  ì‚¬ìš©</strong>í•œë‹¤ - DBì—°ê²°ì‹œë§ˆë‹¤ í•´ë‹¹ ì •ë³´ë¥¼ ë§¤ë²ˆ ì…ë ¥í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ í•´ì†Œ</li>\n</ul>\n<h3 id=\"2--jndi-java-naming-and-directory-interface\" style=\"position:relative;\"><a href=\"#2--jndi-java-naming-and-directory-interface\" aria-label=\"2  jndi java naming and directory interface permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2)  JNDI (Java Naming and Directory Interface)</h3>\n<ul>\n<li>ë¶„ì‚°ëœ ê°ì²´ë¥¼ ì°¾ê¸°ìœ„í•´ <strong>íŠ¹ì •í•œ ì´ë¦„ìœ¼ë¡œ ê°ì²´ë¥¼ ë“±ë¡í•´ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ</strong> í•´ì£¼ëŠ” ìë°” API</li>\n<li>Tomcatê³¼ ê°™ì€ WASì—ì„œëŠ” íŠ¹ì • í´ë”ì— í•„ìš”í•œ ë°ì´í„° ì†ŒìŠ¤(ë¼ì´ë¸ŒëŸ¬ë¦¬)ê°€ ìˆëŠ”ë° ê·¸ê²ƒì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ JNDI ê¸°ìˆ ì„ í™œìš©í•œë‹¤.</li>\n<li>ë¯¸ë¦¬ ì§€ì •í•œ ì´ë¦„(<code class=\"language-text\">name</code>)ì„ ì°¾ì•„ì„œ(<code class=\"language-text\">lookup</code>) í™œìš©í•˜ë©´ ëœë‹¤.</li>\n<li><code class=\"language-text\">Initialcontext</code>ëŠ” JNDI namespaceì˜ ëª¨ë“  ëª…ëª…ëœ ê°ì²´ë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´</li>\n</ul>\n<h3 id=\"-tomcatì—ì„œ-jndi-í™œìš©í•´ì„œ-dbì—°ê²°í•˜ê¸°\" style=\"position:relative;\"><a href=\"#-tomcat%EC%97%90%EC%84%9C-jndi-%ED%99%9C%EC%9A%A9%ED%95%B4%EC%84%9C-db%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\" tomcatì—ì„œ jndi í™œìš©í•´ì„œ dbì—°ê²°í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’ Tomcatì—ì„œ JNDI í™œìš©í•´ì„œ DBì—°ê²°í•˜ê¸°</h3>\n<ul>\n<li><code class=\"language-text\">context.xml</code> íŒŒì¼ì— ì»¤ë„¥ì…˜í’€ì„ ë§Œë“œëŠ” DataSource ë¦¬ì†ŒìŠ¤ë¥¼ ë“±ë¡í•œë‹¤.</li>\n<li>JNDIê¸°ìˆ ì„ í†µí•´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ì´ë¦„ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•œë‹¤.</li>\n<li>DataSourceëŠ” ì‚¬ìš©ì ìš”ì²­ì´ ìˆì„ ë•Œë§ˆë‹¤ Connectionì„ ì œê³µí•œë‹¤.</li>\n</ul>\n<h2 id=\"ì›¹-í”„ë¡œì íŠ¸ì—ì„œ-db-ì—°ë™í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-db-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\" aria-label=\"ì›¹ í”„ë¡œì íŠ¸ì—ì„œ db ì—°ë™í•˜ê¸° permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì›¹ í”„ë¡œì íŠ¸ì—ì„œ DB ì—°ë™í•˜ê¸°</h2>\n<h3 id=\"1-jdbc-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#1-jdbc-%EC%82%AC%EC%9A%A9\" aria-label=\"1 jdbc ì‚¬ìš© permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) JDBC ì‚¬ìš©</h3>\n<ol>\n<li>\n<p>JDBC Driver ì„¤ì •</p>\n<ul>\n<li>ì˜¤ë¼í´ 11g xe ê¸°ì¤€ -<code class=\"language-text\">ojdbc6.jar</code>íŒŒì¼ì„ <code class=\"language-text\">WebContent\\WEP-INF\\lib</code> í´ë”ì— ë„£ëŠ”ë‹¤</li>\n</ul>\n</li>\n<li>\n<p>ì»¤ë„¥ì…˜í’€ì— ëŒ€í•œ ì •ë³´ë¥¼ DataSourceì— ì„¤ì •</p>\n<ul>\n<li>ì²«ë²ˆì§¸ ë°©ë²•) <code class=\"language-text\">Servers\\Tomcat v9.0 Server at localhost-config\\context.xml</code> íŒŒì¼ì— ì„¤ì •í•´ë„ ë˜ê³ ,</li>\n<li>ë‘ë²ˆì§¸ ë°©ë²•) <code class=\"language-text\">Servers\\Tomcat v9.0 Server at localhost-config\\context.xml</code>ì„ ë³µì‚¬í•´ì„œ í˜„ í”„ë¡œì íŠ¸ì˜ <code class=\"language-text\">META-INF</code> í•˜ë‹¨ì— ë¶™ì—¬ë„£ê¸° í›„ í¸ì§‘í•´ë„ ëœë‹¤. </li>\n</ul>\n<p>í”„ë¡œì íŠ¸ë§ˆë‹¤ ì„¤ì •í•˜ëŠ” ê²ƒì´ ë” ì•ˆì •ì ì´ë¯€ë¡œ ë‘ë²ˆì§¸ ë°©ë²•ìœ¼ë¡œ í•˜ê² ë‹¤.</p>\n<br>\n<p>&#x3C;META-INF \\ context.xml></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Context</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Resource</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc/myoracle<span class=\"token punctuation\">\"</span></span> \n             <span class=\"token attr-name\">auth</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Container<span class=\"token punctuation\">\"</span></span>\n             <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>javax.sql.DataSource<span class=\"token punctuation\">\"</span></span> \n             <span class=\"token attr-name\">driverClassName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>oracle.jdbc.OracleDriver<span class=\"token punctuation\">\"</span></span>\n             <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:oracle:thin:@127.0.0.1:1521:xe<span class=\"token punctuation\">\"</span></span>\n             <span class=\"token attr-name\">username</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SCOTT<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">password</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>TIGER<span class=\"token punctuation\">\"</span></span> \n             <span class=\"token attr-name\">maxTotal</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> \n             <span class=\"token attr-name\">maxIdle</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span>\n             <span class=\"token attr-name\">maxWaitMillis</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Context</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ ì´ë ‡ê²Œ <strong>ì´ë¦„ì´ â€œjdbc/myoracleâ€ì´ê³ , ì¢…ë¥˜ëŠ” DataSourceì¸</strong> resourceë¥¼ ìƒì„±í•˜ì˜€ë‹¤.</p>\n<br>\n<p>âœ… Resource ì„¤ì •ê°’ ì„¤ëª…</p>\n<table>\n<thead>\n<tr>\n<th>ì»¤ë„¥ì…˜í’€ ì„¤ì •ê°’</th>\n<th>ì„¤ëª…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>initialSize</td>\n<td>ìµœì´ˆë¡œ ì»¤ë„¥ì…˜í’€ ìƒì„± ì‹œ ë§Œë“¤ Connection ê°ì²´ì˜ ìˆ˜ (ê¸°ë³¸ê°’ 0)</td>\n</tr>\n<tr>\n<td>minIdle</td>\n<td>ìµœì†Œí•œìœ¼ë¡œ ìœ ì§€ë  Connection ê°ì²´ì˜ ìˆ˜ (ê¸°ë³¸ê°’ 0)</td>\n</tr>\n<tr>\n<td>maxIdle</td>\n<td>ì»¤ë„¥ì…˜í’€ì— ë°˜ë‚©ëœ ìœ íœ´ Connection ê°ì²´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ê°’ (ê¸°ë³¸ê°’ 8)</td>\n</tr>\n<tr>\n<td>maxTotal (= maxActive)</td>\n<td>ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ì»¤ë„¥ì…˜ ê°¯ìˆ˜ (ê¸°ë³¸ê°’ 8)</td>\n</tr>\n<tr>\n<td>maxWaitMillis (=maxWait)</td>\n<td>í• ë‹¹ë°›ì„ Connection ê°ì²´ê°€ ì—†ì„ ë•Œ ìŠ¤ë ˆë“œë¥¼ ë¸”ë¡ì‹œí‚¬ ì‹œê°„ (1/1000ì´ˆ ë‹¨ìœ„) / -1 : ë¬´í•œ ëŒ€ê¸° ì˜ë¯¸</td>\n</tr>\n</tbody>\n</table>\n<p>â€‹\t </p>\n</li>\n<li>\n<p>.java í˜¹ì€ .jsp íŒŒì¼ì—ì„œ ì‚¬ìš©</p>\n<p>&#x3C;DButil.java></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">util</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>naming<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>naming<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InitialContext</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>naming<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">NamingException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Connection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DBUtil</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token comment\">// datasourceëŠ” static ë©¤ë²„ë³€ìˆ˜ë¡œ ì„¤ì • - í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìƒì„±</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">DataSource</span> ds<span class=\"token punctuation\">;</span>   \n\t\n\t<span class=\"token keyword\">static</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token comment\">// InitialContextê°€ ìƒì„±ë˜ë©´ì„œ context.xmlì— ì €ì¥ëœ ì •ë³´ë¥¼ ì½ì–´ì˜¨ë‹¤</span>\n           <span class=\"token class-name\">Context</span> initContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InitialContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\t\t\t\n           <span class=\"token comment\">// \"java:/comp/env\" = java environmentìƒì˜ component(=ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ê°ì²´)</span>\n           <span class=\"token comment\">// ìë°” ì‹¤í–‰í™˜ê²½ ë‚´ë¶€ì— ì €ì¥ëœ ìì›ì„ ê²€ìƒ‰í•´ì„œ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ëœ»</span>\n           <span class=\"token class-name\">Context</span> envContext  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">)</span>initContext<span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java:/comp/env\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n\t\t\t\n           <span class=\"token comment\">// \"jdbc/myoracle\" ì´ë¦„ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ìì›(ì¦‰ Datasource)ì„ dsë¼ëŠ” ë³€ìˆ˜ëª…ìœ¼ë¡œ ì‚¬ìš©</span>\n           ds <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DataSource</span><span class=\"token punctuation\">)</span>envContext<span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc/myoracle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           \n       <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NamingException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n           e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n\t\t\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// getConnection() ë©”ì†Œë“œ ì‹¤í–‰ì‹œë§ˆë‹¤ ì»¤ë„¥ì…˜í’€ë¡œë¶€í„° ì»¤ë„¥ì…˜ ë°›ì•„ì˜¤ëŠ” ë©”ì†Œë“œ</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Connection</span> <span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> ds<span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<br>\n<h3 id=\"2-jpa-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#2-jpa-%EC%82%AC%EC%9A%A9\" aria-label=\"2 jpa ì‚¬ìš© permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) JPA ì‚¬ìš©</h3>\n<ol>\n<li>í”„ë¡œì íŠ¸ë¥¼ JPA í”„ë¡œì íŠ¸ë¡œ ë³€í™˜ </li>\n<li>\n<p>í”„ë¡œì íŠ¸ë¥¼ Maven í”„ë¡œì íŠ¸ë¡œ ë³€í™˜ </p>\n<ul>\n<li><code class=\"language-text\">pom.xml</code> ì„¤ì •íŒŒì¼ ìˆ˜ì •í•˜ì—¬ oracle Driver ë“±ë¡ ë° javax.persistence, org.hibernate ë“±ë¡ </li>\n<li>lombok, slf4j ë“±ë“±ë„ ë“±ë¡í•´ì„œ ì‚¬ìš©</li>\n</ul>\n</li>\n<li><code class=\"language-text\">persistence.xml</code> ì„¤ì •íŒŒì¼ ìˆ˜ì • (1~3ë²ˆ ê³¼ì •  ì´ì „ í¬ìŠ¤íŒ… ì°¸ê³  - <a href=\"https://hyemin-jang.github.io/Java/12.JPA/\">[Java] 12. JPA</a> )</li>\n<li>\n<p>.java í˜¹ì€ .jsp íŒŒì¼ì—ì„œ ì‚¬ìš©</p>\n<p>&#x3C;DBUtil.java></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">util</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EntityManager</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EntityManagerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DBUtil</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">EntityManagerFactory</span> emf<span class=\"token punctuation\">;</span>\n   \n   <span class=\"token keyword\">static</span> <span class=\"token punctuation\">{</span>\n       emf <span class=\"token operator\">=</span> <span class=\"token class-name\">Persistence</span><span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManagerFactory</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myoracle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token comment\">// EntityManagerFactoryëŠ” ì›¹ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë¡œë”©ë˜ëŠ” ì‹œì ì— ë”± í•œê°œë§Œ ìƒì„±</span>\n       <span class=\"token comment\">// ì‚¬ìš©ì ìš”ì²­ì‹œë§ˆë‹¤(=ìŠ¤ë ˆë“œ í•˜ë‚˜ ìƒì„±ë ë•Œë§ˆë‹¤) EntityManagerë¥¼ ìƒì„±, ê´€ë¦¬</span>\n       <span class=\"token comment\">// JDBCì˜ Connection Poolê³¼ ê°™ë‹¤ê³  ìƒê°í•˜ë©´ ë¨</span>\n   <span class=\"token punctuation\">}</span>\n   \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">EntityManager</span> <span class=\"token function\">getEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">return</span> emf<span class=\"token punctuation\">.</span><span class=\"token function\">createEntityManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token comment\">// EntityManagerëŠ” ìŠ¤ë ˆë“œ ê°„ì— ê³µìœ ë˜ì§€ ì•ŠìŒ</span>\n       <span class=\"token comment\">// ì—”í‹°í‹°ì™€ ê´€ë ¨ëœ ëª¨ë“  ì¼(CRUD) ì²˜ë¦¬</span>\n       <span class=\"token comment\">// JDBCì˜ Connection ê°ì²´ì™€ ê°™ë‹¤ê³  ìƒê°í•˜ë©´ ë¨</span>\n   <span class=\"token punctuation\">}</span>\n   \n   <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       emf<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       emf <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>","tableOfContents":"<ul>\n<li><a href=\"/Java/13.ConnectionPool/#connection-pool%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">Connection Poolì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ </a></li>\n<li>\n<p><a href=\"/Java/13.ConnectionPool/#connection-pool-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Connection Pool ë§Œë“¤ê¸°</a></p>\n<ul>\n<li><a href=\"/Java/13.ConnectionPool/#1--datasource\">(1)  DataSource</a></li>\n<li><a href=\"/Java/13.ConnectionPool/#2--jndi-java-naming-and-directory-interface\">(2)  JNDI (Java Naming and Directory Interface)</a></li>\n<li><a href=\"/Java/13.ConnectionPool/#-tomcat%EC%97%90%EC%84%9C-jndi-%ED%99%9C%EC%9A%A9%ED%95%B4%EC%84%9C-db%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">ğŸ’ Tomcatì—ì„œ JNDI í™œìš©í•´ì„œ DBì—°ê²°í•˜ê¸°</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Java/13.ConnectionPool/#%EC%9B%B9-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-db-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0\">ì›¹ í”„ë¡œì íŠ¸ì—ì„œ DB ì—°ë™í•˜ê¸°</a></p>\n<ul>\n<li><a href=\"/Java/13.ConnectionPool/#1-jdbc-%EC%82%AC%EC%9A%A9\">1) JDBC ì‚¬ìš©</a></li>\n<li><a href=\"/Java/13.ConnectionPool/#2-jpa-%EC%82%AC%EC%9A%A9\">2) JPA ì‚¬ìš©</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"[Java] DBì—°ë™ê³¼ Connection Pool","date":"September 05, 2021"}}},"pageContext":{"slug":"/Java/13.ConnectionPool/","previous":{"fields":{"slug":"/Algorithm/ë™ì ê³„íšë²•/"},"frontmatter":{"title":"[Algorithm] ë™ì ê³„íšë²•(Dynamic Programming)"}},"next":{"fields":{"slug":"/JavaScript/1-javascript/"},"frontmatter":{"title":"[JavaScript] ìë°”ìŠ¤í¬ë¦½íŠ¸ ê¸°ì´ˆ"}}}}}