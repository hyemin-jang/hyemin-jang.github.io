{"componentChunkName":"component---src-templates-blog-post-js","path":"/Java/11.JDBC/","result":{"data":{"site":{"siteMetadata":{"title":"Hyem.log","author":"[hyem]","siteUrl":"https://hyemin-jang.github.io","comment":{"disqusShortName":"","utterances":"hyemin-jang/hyemin-jang.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"89f52a67-7b47-5778-a82b-28472df85661","excerpt":"1. JDBC Java DataBase Connectivity : 자바 언어로 다양한 종류의 DB에 접속하고 SQL문을 수행하기 위해 사용되는 표준 API.  자바 프로그램과 DBMS간의 통신을 중간에서 번역해주는 역할을 한다고 보면 된다. ▷▷ Java의 JDBC: 시작하기 전에 알아야 할 5가지 : 네이버 블로그 1) JDBC 인터페이스 : JDBC 프로그램을 만들기 위한 API들. java.sql 패키지 내에 있는 주요 API들은 다음과 같다.  DB…","html":"<h1 id=\"1-jdbc\" style=\"position:relative;\"><a href=\"#1-jdbc\" aria-label=\"1 jdbc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. JDBC</h1>\n<p><strong>Java DataBase Connectivity</strong></p>\n<p>: 자바 언어로 다양한 종류의 DB에 접속하고 SQL문을 수행하기 위해 사용되는 표준 API. </p>\n<p>자바 프로그램과 DBMS간의 통신을 중간에서 번역해주는 역할을 한다고 보면 된다.</p>\n<p><img src=\"https://mblogthumb-phinf.pstatic.net/MjAyMDAxMDJfMTg4/MDAxNTc3OTQzMjEyMzU5.1-BQvmFTERWB6oyQZEHjljFNNgnK7PG8V7LWkTFJsDEg.yG2CXl-m3a5uOrfuLh40_q_4rl-aAqXIsAQm_LAeCx0g.PNG.ki630808/jdbcjava1.PNG?type=w800\" alt=\"▷▷ Java의 JDBC: 시작하기 전에 알아야 할 5가지 : 네이버 블로그\"></p>\n<h2 id=\"1-jdbc-인터페이스\" style=\"position:relative;\"><a href=\"#1-jdbc-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"1 jdbc 인터페이스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) JDBC 인터페이스</h2>\n<p>: JDBC 프로그램을 만들기 위한 API들. java.sql 패키지 내에 있는 주요 API들은 다음과 같다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">java.sql.Driver</code></p>\n<ul>\n<li>DB 벤더에 맞는 드라이버를 호출하는 인터페이스</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">java.sql.Connection</code></p>\n<ul>\n<li>특정 DB와의 연결 정보를 가지는 인터페이스</li>\n<li>DriverManager로부터 Connection 객체를 가져온다</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">java.sql.Statement</code></p>\n<ul>\n<li>SQL 쿼리문을 DB에 전송하는 방법을 정의한 인터페이스</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">java.sql.PreparedStatement</code></p>\n<ul>\n<li>Statement의 하위 인터페이스</li>\n<li>SQL문을 미리 컴파일하여 실행 속도를 높임</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">java.sql.ResultSet</code></p>\n<ul>\n<li>SELECT 구문 실행 결과를 조회할 수 있는 방법을 정의한 인터페이스</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-jdbc-driver\" style=\"position:relative;\"><a href=\"#2-jdbc-driver\" aria-label=\"2 jdbc driver permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) JDBC Driver</h2>\n<p>:  자바 프로그램의 요청을 각 DBMS가 이해할 수 있게 해주는 자바 클래스 파일</p>\n<ul>\n<li>java.sql의 인터페이스들은 표준화를 위한 틀 역할만 제공하고,  <strong>JDBC Driver가 인터페이스를 상속하여 재정의</strong>함으로써  실제 메소드 몸체를 구현한다.</li>\n<li>\n<p>각 DB 벤더사가 JDBC Driver를 제공하기 때문에 개발자는 직접 인터페이스를 재정의할 필요 없이 가져다 쓰기만 하면 된다.</p>\n<blockquote>\n<p>오라클: oracle.jdbc.driver.OracleDriver</p>\n<p>MySQL: com.mysql.jdbc.Driver </p>\n<p>MariaDB: org.mariadb.jdbc.Driver  등등</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"-이클립스에서-jdbc-드라이버-사용하기---oracle11g-xe-기준\" style=\"position:relative;\"><a href=\"#-%EC%9D%B4%ED%81%B4%EB%A6%BD%EC%8A%A4%EC%97%90%EC%84%9C-jdbc-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0---oracle11g-xe-%EA%B8%B0%EC%A4%80\" aria-label=\" 이클립스에서 jdbc 드라이버 사용하기   oracle11g xe 기준 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💎 이클립스에서 JDBC 드라이버 사용하기 - Oracle11g XE 기준</h3>\n<ol>\n<li>오라클이 설치되어 있다면 오라클 드라이버 jar파일(=자바 실행파일)도 이미 가지고 있다. 오라클이 설치된 디렉토리로 가서 <code class=\"language-text\">oraclexe\\app\\oracle\\product\\11.2.0\\server\\jdbc\\lib</code> 경로로 찾아가보면 <strong>odbc6.jar</strong> 파일이 있다(jdk1.8 이상에서 사용). 이 파일을 원하는 위치에 복사해둔다.</li>\n<li>\n<p>자바 프로젝트를 우클릭하여 Build Path - Add Libraries 통해 라이브러리를 추가한다.</p>\n<p>목록 중 User Library를 선택한다.</p>\n</li>\n</ol>\n<p><img src=\"C:%5CUsers%5Chmjan%5CDesktop%5Cimage%5Cimage-20210820191216912.png\"></p>\n<ol start=\"3\">\n<li>New를 눌러 새로운 라이브러리를 추가한 뒤, <strong>Add External JARs</strong>를 누르고 아까 복사해뒀던 <strong>odbc6.jar</strong>를 추가한다.  Apply and Close를 눌러 등록 완료한다.</li>\n</ol>\n<p><img src=\"C:%5CUsers%5Chmjan%5CDesktop%5Cimage%5Cimage-20210821002300277.png\" alt=\"image-20210821002300277\"></p>\n<ol start=\"4\">\n<li>\n<p>패키지 하단에 이렇게 odbc6.jar가 정상 등록되어 있다면 이제 이클립스에서 oracle JDBC Driver를 사용할 수 있다.</p>\n<p><img src=\"C:%5CUsers%5Chmjan%5CDesktop%5Cimage%5Cimage-20210821002851211.png\" alt=\"image-20210821002851211\"></p>\n</li>\n</ol>\n<h2 id=\"3--jdbc-프로그래밍\" style=\"position:relative;\"><a href=\"#3--jdbc-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D\" aria-label=\"3  jdbc 프로그래밍 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3)  JDBC 프로그래밍</h2>\n<p>JDBC를 이용한 프로그램은 다음과 같은 흐름으로 구성된다.</p>\n<ol>\n<li>\n<p>특정 DB에 접속하는 객체 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Connection</span> con <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span>getConnection\n   \t\t\t <span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc:oracle:thin:@127.0.0.1:1521:xe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"SCOTT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"TIGER\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>✔ getConnection 메소드의 인자값</p>\n<ul>\n<li>String url : 접속할 서버의 URL이다. 프로토콜 (jdbc:) , 서버주소(127.0.0.1 = 로컬서버라는 뜻), 서버 포트(1521), DB이름(xe)으로 구성된다. </li>\n<li>String user : DB 로그인 계정</li>\n<li>String password : DB 로그인 비밀번호</li>\n</ul>\n<p>⚡ DB접속 관련 정보가 코드에 노출되지 않도록 properties파일에 따로 저장하여 사용 권장</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Properties</span> dbinfo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// static 블록을 사용해 프로그램 실행시 딱 한번만 로딩해서 메모리에 저장</span>\n\t<span class=\"token keyword\">static</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\tdbinfo<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dbinfo.properties\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Connection</span> <span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{</span>  \n\t\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>dbinfo<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc.url\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \t\n                                          dbinfo<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc.id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                                          dbinfo<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc.pw\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<p>&#x3C;dbinfo.properties 파일></p>\n<div class=\"gatsby-highlight\" data-language=\"properties\"><pre class=\"language-properties\"><code class=\"language-properties\"><span class=\"token comment\">#db.properties</span>\n<span class=\"token attr-name\">jdbc.driver</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">oracle.jdbc.driver.OracleDriver</span>\n<span class=\"token attr-name\">jdbc.url</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">jdbc:oracle:thin:@127.0.0.1:1521:xe</span>\n<span class=\"token attr-name\">jdbc.id</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">SCOTT</span>\n<span class=\"token attr-name\">jdbc.pw</span><span class=\"token punctuation\">=</span><span class=\"token attr-value\">TIGER</span></code></pre></div>\n</li>\n<li>\n<p>SQL 문장 실행 가능한 객체 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Statement</span> stmt <span class=\"token operator\">=</span> con<span class=\"token punctuation\">.</span><span class=\"token function\">createStatement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>SQL 문장 실행</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// dept테이블의 모든 데이터를 조회하는 select문 실행</span>\n<span class=\"token class-name\">ResultSet</span> rset <span class=\"token operator\">=</span> stmt<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select * from dept\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>✔ SQL문을 실행하기 위해 Statement 객체에서 제공하는 메소드</p>\n<ul>\n<li><code class=\"language-text\">executeQuery</code> : select문 실행하여 ResultSet 객체 반환</li>\n<li><code class=\"language-text\">ResultSet</code> : select한 데이터집합을 가지는 객체</li>\n<li><code class=\"language-text\">executeUpdate</code> : insert, update, delete문 실행</li>\n</ul>\n</li>\n<li>\n<p>결과 활용</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// select한 결과 출력</span>\n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>rset<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>rset<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"deptno\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span> <span class=\"token operator\">+</span> rset<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dname\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"/\"</span> \n                      <span class=\"token operator\">+</span> rset<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>현재 resultSet 객체 rset이 가지고 있는 값은 다음과 같다.</p>\n<table>\n<thead>\n<tr>\n<th>커서</th>\n<th>deptno</th>\n<th>dname</th>\n<th>loc</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">→</code></td>\n<td></td>\n<td></td>\n<td></td>\n<td>시작 빈행</td>\n</tr>\n<tr>\n<td></td>\n<td>10</td>\n<td>a</td>\n<td>aa</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>20</td>\n<td>b</td>\n<td>bb</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td>끝 빈행</td>\n</tr>\n</tbody>\n</table>\n<p>✔ ResultSet 객체의 메소드</p>\n<ul>\n<li><code class=\"language-text\">boolean next()</code></li>\n</ul>\n<p> : 커서 다음에 레코드가 있는지 판단하여 없으면 false, 있으면 true를 반환한 다음에 커서를 다음 레코드로 이동시킴</p>\n<ul>\n<li><code class=\"language-text\">Int getInt(int columnIndex)</code> / <code class=\"language-text\">Int getInt(String columnLabel)</code>  /</li>\n</ul>\n<p> <code class=\"language-text\">String getString(int columnIndex)</code> / <code class=\"language-text\">String getString(String columnLabel)</code></p>\n<p> : 현재 커서가 가리키는 레코드의 컬럼 값을 데이터 타입에 따라 추출. 파라미터로 컬럼 인덱스 또는 컬럼명 사용 가능. </p>\n</li>\n<li>\n<p>자원 반환</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 반환 순서 - 가장 최근에 사용한 객체부터</span>\nrset<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nstmt<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ncon<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ol>\n<hr>\n<h1 id=\"2-dao-pattern\" style=\"position:relative;\"><a href=\"#2-dao-pattern\" aria-label=\"2 dao pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. DAO Pattern</h1>\n<p>: <strong>Data Access Object</strong> Pattern</p>\n<ul>\n<li>DB 연동 클래스를 정형화해서 개발하게 하는 구조</li>\n<li>일반적으로 한 테이블 당 하나의 DAO 클래스를 개발함</li>\n<li>각 DAO 클래스는 CRUD 기능을 실행해주는 메소드 제공</li>\n</ul>\n<h3 id=\"-dao에서-connection에-접근하는-방식\" style=\"position:relative;\"><a href=\"#-dao%EC%97%90%EC%84%9C-connection%EC%97%90-%EC%A0%91%EA%B7%BC%ED%95%98%EB%8A%94-%EB%B0%A9%EC%8B%9D\" aria-label=\" dao에서 connection에 접근하는 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💡 DAO에서 Connection에 접근하는 방식</h3>\n<ol>\n<li>\n<p>DAO 클래스 내 메소드에서 직접 Connection 생성</p>\n<p>=> 메소드를 실행할 때마다 매번 커넥션 생성 및 자원반환 코드를 작성한다 </p>\n<p>=> 중복 코드로 비효율적임</p>\n</li>\n<li>Connection 생성 및 자원반환만 담당하는 Util 클래스 따로 개발하고 DAO 클래스 내 메소드에서 가져다 쓰기</li>\n</ol>\n<p>⚡ Util 클래스 개발 예 : </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">util</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Connection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResultSet</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SQLException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Statement</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DBUtil</span> <span class=\"token punctuation\">{</span>   \n    <span class=\"token comment\">// DB접속 정보에 관한 에러는 사용자가 알아야 하는 정보</span>\n    <span class=\"token comment\">// 메소드를 실행한 위치로 throws SQLException</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Connection</span> <span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{</span>     \n\t\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>\n            \t<span class=\"token string\">\"jdbc:oracle:thin:@127.0.0.1:1521:xe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"SCOTT\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"TIGER\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Connection</span> con<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultSet</span> rset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>rset <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>    \n\t\t\t\trset<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\trset <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>stmt <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tstmt<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tstmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>con <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\t\t\t\t\n\t\t\t\tcon<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tcon <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\t\t\t\t\t\n\t\t\t<span class=\"token punctuation\">}</span> \n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>   \n\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n         <span class=\"token comment\">// 자원 반환에 관련된 에러에 관한 내용은 사용자가 알 필요 없음</span>\n         <span class=\"token comment\">// 현 위치에서 catch</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n    <span class=\"token comment\">// select용 자원반환 메서드</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Connection</span> con<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ResultSet</span> rset<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>rset <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>    \n\t\t\t\trset<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\trset <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>stmt <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tstmt<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tstmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>con <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\t\t\t\t\n\t\t\t\tcon<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tcon <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\t\t\t\t\t\n\t\t\t<span class=\"token punctuation\">}</span> \n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>   \n\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// insert, update, delete용 자원반환 메서드</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Connection</span> con<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Statement</span> stmt<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\t\t\t\t\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>stmt <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tstmt<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tstmt <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>con <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\t\t\t\t\n\t\t\t\tcon<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tcon <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\t\t\t\t\t\t\n\t\t\t<span class=\"token punctuation\">}</span> \n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SQLException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\te<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"[Java] 11. JDBC","date":"August 19, 2021"}}},"pageContext":{"slug":"/Java/11.JDBC/","previous":{"fields":{"slug":"/Java/10.Maven/"},"frontmatter":{"title":"[Java] 10. Maven"}},"next":{"fields":{"slug":"/Java/12.JPA/"},"frontmatter":{"title":"[Java] 12. JPA"}}}}}